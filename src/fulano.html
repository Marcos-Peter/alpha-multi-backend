<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>NodeJS WebSocket Client Fulano</title>
  </head>
  <body>
    <h1>Websocket Client of Fulano</h1>
    <script>
      const userName = 'Fulano';
      const auctionName = 'SAPATO';
      const messages = [`R$ 1.000,00`, 'R$ 2.430,00', 'R$ 6.700,00'];

      const ws = new WebSocket(`ws://localhost:8080/ws?auctionName=${auctionName}&userName=${userName}`);

      ws.addEventListener("open", () =>
      {
        console.log("VocÃª entrou no chat.");

        setInterval(() => 
        {
          ws.send(JSON.stringify({ auctionName, userName, message: messages[Math.floor(Math.random() * messages.length)] }));
        }, 
        (Math.random() * 5001) + 2000);
      });
      
      ws.addEventListener('message', function (event) 
      {
          console.log(event.data);
      });
    </script>
  </body>
</html>
